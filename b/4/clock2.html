<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>canvas绘制时钟</title>
	<style>
		*{
			padding:0;
			margin:0;
		}
		div{
			text-align:center;
			margin-top:100px;
		}
	</style>
</head>
<body>
	<div>
		<canvas width = "200" height = "200" id = "clock"></canvas>
	</div>
	<script>
		var c = document.getElementById("clock");
		var ctx = c.getContext("2d");
		var width = ctx.canvas.width;
		var height = ctx.canvas.height;
		var r = width / 2;
		
		function DrawCircle(){
			ctx.save();
			ctx.translate(r, r);
			ctx.beginPath();
			ctx.strokeStyle = "#696969";
			ctx.lineWidth = 2;
			ctx.arc(0, 0, r-1, 0 ,2 * Math.PI, false);
			ctx.stroke();
			ctx.fillStyle = "#eceffe"
			ctx.arc(0, 0, r-4, 0 ,2 * Math.PI, false);
			ctx.fill();
			ctx.beginPath();
			ctx.arc(0, 0, r-6, 0 ,2 * Math.PI, false);
			ctx.stroke();
			
			for(var i = 0; i < 60; i++){
				var rad = 2 * Math.PI /60 * i;
				var x = Math.cos(rad) * (r-15);
				var y = Math.sin(rad) * (r-15);
				ctx.save();
				ctx.beginPath();
				if(i % 5 === 0){
					ctx.translate(x, y);
					ctx.rotate(rad);
					ctx.moveTo(2, 0);
					ctx.lineTo(-8, 0);
					ctx.stroke();
				}else{
					ctx.arc(x, y, 1, 0, 2*Math.PI, false);
					ctx.fillStyle = "#999";
					ctx.fill();
				}
				ctx.restore();
			}
		}
		function DrawHour(h, s){
			var rad = 2 * Math.PI / 12 * h;
			var mrad = 2 * Math.PI / 12 / 60 * s;
			ctx.save();
			ctx.beginPath();
			ctx.rotate(rad + mrad);
			ctx.lineWidth = 3;
			ctx.strokeStyle = "#666";
			ctx.lineCap = "round";
			ctx.moveTo(0, 0);
			ctx.lineTo(0, -r/2);
			ctx.stroke();
			ctx.restore();
		}
		function DrawMinute(m){
			var rad = 2 * Math.PI / 60 * m;
			ctx.save();
			ctx.beginPath();
			ctx.rotate(rad);
			ctx.lineWidth = 2;
			ctx.lineCap = "round";
			ctx.moveTo(0, 0);
			ctx.lineTo(0, -r+25);
			ctx.stroke();
			ctx.restore();
		}
		function DrawSecond(s){
			var rad = 2 * Math.PI / 60 * s;
			ctx.save();
			ctx.beginPath();
			ctx.rotate(rad);
			ctx.lineWidth = 1;
			ctx.moveTo(0, 20);
			ctx.lineTo(0, -r+22);
			ctx.stroke();
			ctx.restore();
		}
		function DrawDot(){
			ctx.beginPath();
			ctx.fillStyle = "#666";
			ctx.arc(0, 0, 3, 0, 2*Math.PI, false);
			ctx.fill();
		}
		
		function Draw(){
			ctx.clearRect(0, 0, width, height);
			var time = new Date();
			var hour = time.getHours() % 12;
			var minute = time.getMinutes();
			var second = time.getSeconds();
			DrawCircle();
			DrawHour(hour, minute);
			DrawMinute(minute);
			DrawSecond(second);
			DrawDot();
			ctx.restore();
		}
		Draw();
		setInterval(Draw, 1000);
	</script>
</body>
</html>